# Node Place 기능 요구사항

> **서비스**: nodeplace.kr — 파티 참가신청 플랫폼
> **최종수정**: 2026-02-27

| 페이지 | 주소 |
|--------|------|
| 소개 | https://nodeplace.kr/about |
| 참가신청 | https://nodeplace.kr |
| 관리자 | https://admin.nodeplace.kr |

---

## 1. 고객 신청

### 신청서 입력항목

| 항목 | 필수 | 비고 |
|------|:----:|------|
| 닉네임 | O | 같은 파티 내 중복 불가, 진행 중 실명 대신 사용 |
| 성별 | O | 남/여 |
| 출생연도 | O | 기본 1990~2006년생 (공통코드에서 변경 가능) |
| 전화번호 | O | 010 시작 |
| MBTI | O | 4쌍 토글(E/I, N/S, F/T, P/J) |
| 환불 계좌 | O | 은행 + 계좌번호 + 소유자 성명 |
| 참여 구분 | O | 성별 선택 후 표시, 유형별 시간/가격 포함 |
| 사진 | - | 프리미엄 파티는 필수 |
| 유입경로 | - | 다중 선택 (인스타, 네이버, 카카오 등 9종) |
| 약관 동의 | O | 이용약관 + 개인정보 처리방침 |
| 인스타그램 | - | |

### 주요 규칙

- **입금자명** 자동 생성: `성명 + 전화번호 끝 4자리` (예: 홍길동5678)
- **중복 신청**: 같은 이름+번호로 재신청 시 기존 정보 덮어쓰기 (단, 입금확인/참석승인 후엔 수정 불가)
- **잔여석 표시**: 남/여 별도 표시, 7일 이내 파티는 적게 표시 (조기마감 유도)

---

## 2. 신청 처리

### 이메일 알림

- 신청 접수 즉시 담당 호스트에게 알림 (닉네임 + 파티명만 표시, 개인정보 미포함)
- 이메일 내 **[신청 처리하기]** 버튼 → 로그인 없이 처리 페이지 이동

### 처리 항목

| 버튼 | 동작 | SMS |
|------|------|:---:|
| 입금 확인 | 입금 상태 → 확인 | X |
| 참석 승인 | 참석 → 승인, QR 토큰 생성 | O |
| 거절 | 참석 → 거절 | O |

- 처리 링크: 해당 신청 1건만 권한, **30분 후 만료**

### SMS 규칙

- **승인/거절 버튼 클릭 시에만** 발송 (인라인 수정으로 상태 변경 시 미발송)
- 재발송: 참석 상태를 "대기"로 되돌린 뒤 다시 승인/거절
- 발신번호: 호스트 등록 개인번호

---

## 3. 파티 관리

### 파티 등록

| 항목 | 필수 | 비고 |
|------|:----:|------|
| 템플릿 | - | 선택 시 장소/시간/옵션 자동 입력 |
| 날짜 | O | 과거 날짜 불가 |
| 담당 호스트 | - | 슈퍼관리자만 지정 가능 |
| 장소 | O | 최대 8자 |
| 등급 | O | 일반 / 프리미엄 |
| 스페셜명 | - | 최대 8자, 파티명에 포함 |
| 시간 | O | 시작~종료 (24시간제) |
| 슬롯 | O | 남/여 정원 각각 설정 |
| 참여옵션 | - | 유형별 시간/가격 개별 설정 |

- **파티명 자동 조합**: `M.D(요일)-장소` 또는 `M.D(요일)-장소(스페셜명)`
- **중복 방지**: 같은 호스트가 같은 날짜+장소로 중복 등록 불가
- **공개 조건**: 활성 + 미마감 + 오늘 이후
- **수동 마감/해제** 가능

### 참여유형 (5종)

| 유형 | 기본 시간 | 남 가격 | 여 가격 |
|------|-----------|---------|---------|
| 올나잇 | 20:00~01:50 | 55,000 | 40,000 |
| 1부 | 20:00~22:50 | 35,000 | 25,000 |
| 2부 | 23:00~01:50 | 25,000 | 25,000 |

- 파티별로 활성 유형/시간/가격 커스터마이징 가능
- 시각 연동: 올나잇=파티 전체, 1부 시작=파티 시작, 2부 종료=파티 종료

### 템플릿

- 호스트별 반복 설정을 묶어 저장 (등급/요일/장소/시간/참여옵션)
- 파티 등록 시 선택하면 자동 복사 (이후 자유 수정)
- 템플릿 수정해도 기존 파티에 영향 없음

---

## 4. 신청자 관리

### 처리 상태

| 구분 | 상태값 |
|------|--------|
| 입금 | 미확인 → 확인 → 환불 |
| 참석 | 대기중 → 승인 / 거절 |

### 관리 기능

- 신청자 인라인 수정 (닉네임, 이름, 연락처, 참여유형, 금액 등)
- 금액 수동 수정 (현장 현금, 할인 대응)
- 관리자 메모
- **수작업 추가** (전화/현장 접수 고객)
- 환불 시 은행+계좌번호 표시 및 복사
- 신청자 삭제 (신청자 있는 파티는 파티 삭제 불가)
- 입금 확인 → 이후 승인/거절 가능 (순서 강제)

---

## 5. QR 체크인

```
고객 QR 제시 → 호스트 스캔 → 정보 확인 + 사진 대조 → 테이블 배정 → 출입 승인
```

- QR: 참석 승인 시 1회성 랜덤 토큰 생성 → SMS로 QR 링크 전달
- 고객은 SMS로 받은 QR 링크로 **체크인 + 호감 게임**까지 진입 (하나의 화면에서 상태에 따라 자동 전환)
- 스캔 시 표시: 이름, 닉네임, 성별, 출생연도, 참여유형, 사진
- 테이블 번호 배정: 1~20번, 1부/2부 별도 배정 가능
- 중복 스캔 방지 (체크인 시각 표시)

---

## 6. 호감 게임

### 진행 흐름

대기 → **1부 진행** → **1부 공개** → **2부 진행** → **2부 공개** → 초기화

### 참가자 화면

**게임 중** (호감 전송 단계):
- 이성 프로필 목록(테이블 무관): 닉네임, MBTI, 사진
- 라운드당 최대 3명에게 호감 전송 (플러팅 메시지 선택 첨부 가능)
- 보낸/받은 호감 수 실시간 배지, 받은 플러팅 메시지 익명 표시

**매칭 공개** (호스트가 공개 전환한 후에만 표시):
- 상호 호감이 성립한 상대의 닉네임, MBTI, 사진, 플러팅 메시지 공개

### 호스트 제어

- 진행 페이지에서 단계별 전환
- 실시간 통계 (전송 건수, 참여 인원, 매칭 쌍)

---

## 7. 진행 관리

- 체크인된 참가자를 테이블별 그룹핑 (닉네임 표시)
- 드래그 앤 드롭으로 테이블 재배치
- 1부/2부 테이블 별도 관리
- 게임 상태 변경 시 라운드 탭 자동 전환
- 여성 로테이션: 위/아래 버튼으로 테이블 간 순환 이동

---

## 8. 관리자 계정

### 권한

| 등급 | 범위 |
|------|------|
| 호스트 | 자신의 템플릿/파티/신청자만 |
| 슈퍼관리자 | 전체 + 관리자 계정/코드/시스템 설정 |

### 메뉴

| 메뉴 | 호스트 | 슈퍼 |
|------|:------:|:----:|
| 내 파티 / 파티 | O | O |
| 신청자 | O | O |
| 진행 | O | O |
| 템플릿 | O | O |
| 관리자 | - | O |
| 코드 | - | O |
| 시스템 | - | O |
| 내 정보 | O | - |
| QR스캔 | O | O |

### 로그인

이메일 입력 → 6자리 인증코드 발송 (1분 유효) → 코드 입력
- 슈퍼관리자가 인증 비활성화 시 이메일만으로 로그인

### 호스트 프로필 (내 정보)

- 공개 닉네임, 직함, 소개글
- 입금 계좌 (고객 신청 시 표시)
- SMS 발신번호
